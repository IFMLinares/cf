{% extends 'base/base.html' %}
{% block title %}Productos{% endblock %}
{% load static %}

{% block content %}
    <br><br>

    <div class="breadcrumb-area bg-gray  subheader-img" style="background-color: white;  position: relative; top: -50px !important;">
      <div class="container">
          <div class="breadcrumb-content text-center subheader-contain">
                <h2>Tienda </h2>
                <p style="font-weight: bold;">Acá podrá encontrar el juguete indicado para tus hijos </p>
            </div>
        </div>
        <!-- <div class="breadcrumb-img-1">
            <img src="{% static 'assets/img/juguete.jpg' %}" alt="">
        </div>
        <div class="breadcrumb-img-2">
            <img src="{% static 'assets/img/juguetes.jpeg' %}" alt="">
        </div> -->
    </div>
    
  {% if messages %}
  {% for message in messages %}
  <div id="toast">
    <div class="checkicon "> <i class="fas fa-check-square"></i> </div>
  <p class="alert alert-{{ message.tags }}"> {{ message }}</p></div>
  {% endfor %}
{% endif %}
    <div class="col-xl-2 col-lg-3 responsive-categori" >
      <div class="shop-sidebar-style">
          <div class="sidebar-widget">
              <h4 class="pro-sidebar-title">Categorías</h4>
              <div class="sidebar-widget-categori mt-45 w-50">
                  <ul>
                      <li>
                        <a class="{% if category == 'alls' %}active{% endif %}" href="{% url 'core:store' %}">Todo</a> 
                      </li>
                      <li>
                        <a class="{% if category == 'B' %}active{% endif %}" href="{% url 'core:store_filter' category='B' %}">Bebés </a> 
                      </li>
                      <li>
                        <a class="{% if category == 'A' %}active{% endif %}" href="{% url 'core:store_filter' category='A' %}">1 - 3 años</a> 
                      </li>
                      <li>
                        <a class="{% if category == 'C' %}active{% endif %}" href="{% url 'core:store_filter' category='C' %}">3 años en adelante </a> 
                      </li>
                      <li>
                        <a class="{% if category == 'D' %}active{% endif %}" href="{% url 'core:store_filter' category='D' %}">Otros</a> 
                      </li>
                  </ul>
              </div>
          </div>
      </div>
  </div>
    <div class="shop-area section-padding-12 pt-25">
        <div class="container-fluid">
            <div class="row flex-row-reverse">
                <div class="col-xl-10 col-lg-9">
                    <div class="shop-wrap-5">
                        <div class="shop-top-bar">
                            <div class="shop-top-bar-left">
                                <div class="shop-tab nav">
                                    <a href="#shop-1" class="active" data-toggle="tab"><img class="inject-me" src="{% static 'assets/images/icon-img/shop-grid.svg' %}" alt=""></a>
                                    <a href="#shop-2" data-toggle="tab"><img class="inject-me" src="{% static 'assets/images/icon-img/shop-list.svg' %}" alt=""></a>
                                </div>
                            </div>
                            <!-- <div class="shop-top-bar-right">
                                <div class="shop-page-list">
                                    <ul>
                                        <li>Mostrar</li>
                                        <li class="active"><a href="#">1</a></li>
                                        <li><a href="#">2</a></li>
                                        <li><a href="#">3</a></li>
                                        <li><a href="#">4</a></li>
                                        <li><a href="#">5</a></li>
                                    </ul>
                                </div>
                            </div> -->
                        </div>
                        <div class="tab-content pt-30">
                            <div id="shop-1" class="tab-pane active">
                                <div class="row">
                                    <!-- <div class="col-xl-6 col-lg-12 col-md-12 col-sm-12 col-12">
                                            <div class="product-wrap mb-50">
                                                <div class="product-img product-img-zoom mb-25">
                                                    <a href="">
                                                        <img src="assets/img/producto.jpg" alt="">
                                                    </a>
                                                </div>
                                                <div class="product-content">
                                                    <h4><a href="">Nombre del Productoo</a></h4>
                                                    <div class="product-price">
                                                        <span>$ XXXX</span>
                                                        <span class="old-price">$ XXXX</span>
                                                    </div>
                                                </div>
                                                <div class="product-action-position-1 text-center">
                                                    <div class="product-content">
                                                        <h4><a href="">Nombre del Producto</a></h4>
                                                        <div class="product-price">
                                                            <span>$ XXXX</span>
                                                            <span class="old-price">$ XXXX</span>
                                                        </div>
                                                    </div>
                                                    <div class="product-action-wrap">
                                                        <div class="product-action-cart">
                                                            <button title="Añadir al Carrito">Añadir al Carrito</button>
                                                        </div>
                                                        <button data-toggle="modal" data-target="#exampleModal"><i class="icon-zoom"></i></button> 
                                                    </div>
                                                </div>
                                            </div>
                                        </div> -->
                                        {% if items %}
                                        {% for item in items %}
                                            <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6 col-6  ">
                                                <div class="product-wrap mb-50">
                                                    <div class="product-img product-img-zoom mb-25">
                                                        <a href="{{item.get_absolute_url}}">
                                                            <img src="{{item.image.url}}" alt="">
                                                        </a>
                                                    </div>
                                                    <div class="product-content" >
                                                        <h4><a href="">{{ item.description }}</a></h4>
                                                        <div class="product-price">
                                                            {% if item.discount %}
                                                            <span class="" style="color: black !important">$</span><span> {{ item.sale_price }}</span>
                                                            <span class="old-price"> {{ item.sale_price }}</span>
                                                            {% else %}
                                                                <span>${{ item.sale_price }}</span>
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                    <div class="product-action-position-1 text-center">
                                                        <div class="product-content" style="display:none;">
                                                            <h4><a href="">{{ item.description }}</a></h4>
                                                            <div class="product-price">
                                                                {% if item.discount %}
                                                                    <span>${{ item.sale_price }}</span>
                                                                    <span class="old-price">$ {{ item.sale_price }}</span>
                                                                    {% else %}
                                                                        <span>${{ item.sale_price }}</span>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                        
                                                        <form action="/addto/" method="post">
                                                          {% csrf_token %}
                                                        <div class="product-action-wrap">
                                                            <div class="product-action-cart">
                                                                <input type="hidden" name="slug" id="slug" value="{{ item.slug }}">
                                                                <button title="Añadir al Carrito" type="submit">Añadir al Carrito</button>
                                                                {% if user.is_anonymous %}
                                                                <input type="hidden" name="visitor" value="{{ visitantId }}">
                                                                {% endif %}
                                                                <button type="button" onclick="modalproduct('{{ item.sku_code }}','{{ item.description }}','{{ item.stock }}','{{ item.sale_price }}', '{{item.image.url}}', '{{item.slug}}')"><i class="icon-zoom"></i></button>
                                                            </div>
                                                            <!-- <button data-toggle="modal" data-target="#exampleModal"><i class="icon-zoom"></i></button> -->
                                                        </div>
                                                      </form>
                                                    </div>
                                                </div>
                                            </div> 
                                        {% endfor %}
                                        {% else %}
                                        <div class="container" style="text-align: center;">
                                          <h1> No tenemos productos disponibles </h1>
                                        </div>
                                        {% endif %}
                                </div>
                            </div>

                            <div id="shop-2" class="tab-pane ">

                                {% if items %}
                                {% for item in items %}
                                <div class="shop-list-wrap mb-50">
                                    <div class="row">
                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                            <div class="product-list-img">
                                                <a href="{{item.get_absolute_url}}">
                                                    <img src="{{item.image.url}}" alt="">
                                                </a>
                                                <div class="shop-list-quickview">
                                                    <button  onclick="modalproduct('{{ item.sku_code }}','{{ item.description }}','{{ item.stock }}','{{ item.sale_price }}', '{{item.image.url}}' , '{{item.slug}}')"><i class="icon-zoom"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="col-lg-8 col-md-8 col-sm-8">
                                            <div class="shop-list-content ml-20">
                                                <h3><a href="#">{{ item.description}}</a></h3>
                                                <div class="pro-list-price">
                                                  <p style="color:black !important; font-weight:bold;">$</p>
                                                  {% if item.discount %}
                                                  <span> {{ item.sale_price }}</span>
                                                    <span class="old-price">  {{ item.sale_price }}</span>
                                                    {% else %}
                                                        <span>${{ item.sale_price }}</span>
                                                    {% endif %}
                                                </div>
                                                <p>{{ item.description}}</p>
                                                
                                                <form action="/addto/" method="post">
                                                  {% csrf_token %}
                                                  <input type="hidden" name="slug" id="slug" value="{{ item.slug }}">
                                                  <input type="hidden" name="quantity" id="quantity" value="1">
                                                <div class="product-list-action">
                                                    <div class="product-action-cart">
                                                        <button title="Añadir al Carrito" type="submit">Añadir al Carrito</button>
                                                    </div>
                                                </div>
                                              </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                                {% else %}
                                <div class="container" style="text-align: center;">
                                  <h1> No tenemos productos disponibles </h1>
                                </div>
                                {% endif %}
                            </div>
                            
                          {% if is_paginated %}
                            <div class="pro-pagination-style text-center mt-50 mb-xl-5">
                                <ul>
                                    {% if page_obj.has_previous %}
                                      <li><a class="" href="?page={{ page_obj.previous_page_number }}"><i class="icofont-long-arrow-left"></i></a></li>
                                    {% endif %}
                                  {% for i in paginator.page_range %}
                                  <!-- <li><a {% if page_obj.number == i %} class="active page-link" {% endif %} class="page-link" href="?page={{ i }}" >{{ i }}</a>1</a></li> -->
                                  <li class="page-item">
                                      <a {% if page_obj.number == i %} class="active page-link" {% endif %} class="page-link" href="?page={{ i }}">{{ i }}</a>
                                  </li>
                                  {% endfor %}
                                    {% if page_obj.has_next %}
                                      <li><a class="" href="?page={{ page_obj.next_page_number }}"><i class="icofont-long-arrow-right"></i></a></li>
                                    {% endif %}
                                </ul>
                            </div>
                          {% endif %}
                        </div>
                    </div>
                </div>
                <div class="col-xl-2 col-lg-2 no-responsive">
                    <div class="shop-sidebar-style">
                        <div class="sidebar-widget">
                            <h4 class="pro-sidebar-title">Categorías</h4>
                            <div class="sidebar-widget-categori mt-45">
                                <ul>
                                    <li>
                                      <a class="{% if category == 'alls' %}active{% endif %}" href="{% url 'core:store' %}">Todo</a> 
                                    </li>
                                    <li>
                                      <a class="{% if category == 'B' %}active{% endif %}" href="{% url 'core:store_filter' category='B' %}">Bebés </a> 
                                    </li>
                                    <li>
                                      <a class="{% if category == 'A' %}active{% endif %}" href="{% url 'core:store_filter' category='A' %}">1 - 3 años</a> 
                                    </li>
                                    <li>
                                      <a class="{% if category == 'C' %}active{% endif %}" href="{% url 'core:store_filter' category='C' %}">3 años en adelante </a> 
                                    </li>
                                    <li>
                                      <a class="{% if category == 'D' %}active{% endif %}" href="{% url 'core:store_filter' category='D' %}">Otros</a> 
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
 
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">x</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="col-lg-5 col-md-5 col-12 col-sm-6">
                  <div class="quickview-img">
                    <img src="" alt="" id="image-product-modal" />
                  </div>
                </div>
                <div class="col-lg-7 col-md-7 col-12 col-sm-6">
                  <div class="product-details-content quickview-content">
                    <h2 id="des"></h2>
                    <div class="product-ratting-review-wrap">
                      <div class="product-ratting-digit-wrap">
                        <div class="product-ratting">
                          <i class="icon-rating"></i>
                          <i class="icon-rating"></i>
                          <i class="icon-rating"></i>
                          <i class="icon-rating"></i>
                          <i class="icon-star-empty"></i>
                        </div>

                        <div class="product-digit">
                          <span id="inv"></span>
                        </div>
                      </div>
                      <!-- <div class="product-review-order">
                        <span>XX Vistas</span>
                        <span>XX ordenes</span>
                      </div> -->
                    </div>
                    <p id="desp">
                      
                    </p>
                    <div class="pro-details-price">
                      <span id="precio"></span>
                      <!-- <span class="old-price">$ XXXXX</span> -->
                    </div>
                    <!-- <div class="pro-details-color-wrap">
                      <span>Color:</span>
                      <div class="pro-details-color-content">
                        <ul>
                          <li><a class="white" href="#">Blanco</a></li>
                          <li><a class="azalea" href="#">Azul</a></li>
                          <li><a class="dolly" href="#">Verde</a></li>
                          <li><a class="peach-orange" href="#">Naranja</a></li>
                          <li>
                            <a class="mona-lisa active" href="#">Rosado</a>
                          </li>
                          <li><a class="cupid" href="#">Gris</a></li>
                        </ul>
                      </div>
                    </div>
                    <div class="pro-details-size">
                      <span>Talla:</span>
                      <div class="pro-details-size-content">
                        <ul>
                          <li><a href="#">XS</a></li>
                          <li><a href="#">S</a></li>
                          <li><a href="#">M</a></li>
                          <li><a href="#">L</a></li>
                          <li><a href="#">XL</a></li>
                          <li><a href="#">XXL</a></li>
                        </ul>
                      </div>
                    </div> -->

                    <form action="/addto/" method="post" id="form-modal">
                    <div class="pro-details-quality">
                      <span>Cantidad:</span>
                      <div class="cart-plus-minus">
                        <input class="cart-plus-minus-box"  type="number" name="quantity" value="1"/>
                      </div>
                    </div>
                    <div class="product-details-meta">
                      <ul>
                        
                        <li><span>SKU:</span> <a href="#"><span id="sku_code"></span></a></li>
                      </ul>
                    </div>
                    <div class="pro-details-action-wrap">
                      <div class="pro-details-buy-now">
                        <a href="#" id="buynow">Comprar Ahora</a>
                          {% csrf_token %}
                          <input type="hidden" name="slug" id="slug-modal" value="">
                      </div> 
                    </div>

                  </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Modal end -->
    {% endblock %}
    {% block extra_js %}
        {% if messages %}
        <script>
          toastFunction();
        </script>
        {% endif %}
    {% endblock %}